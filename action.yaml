name: 'Authenticate in Uffizzi'
description: 'Authenticate in Uffizzi and obtain an access token'
branding:
  color: 'yellow'
  icon: 'upload-cloud'
inputs:
  server:
    description: 'URL to Uffizzi'
    required: true
    default: 'https://app.uffizzi.com'
  oidc-token:
    descrption: 'OIDC token generated by GHA'
    required: false
outputs:
  access_token:
    description: 'Access token obtained from Uffizzi'
runs:
  using: 'docker'
  image: 'docker://limoha/cli:latest'
  args:
    - 'login_by_jwt'
  env:
    OIDC_TOKEN: ${{ inputs.oidc-token }}
    UFFIZZI_SERVER: ${{ inputs.server }}
